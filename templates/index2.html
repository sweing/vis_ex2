<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>InfoVis UE 2023</title>

    <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles/style.css')}}">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.10.0/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-queue/3.0.7/d3-queue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.0/topojson.min.js"></script>

</head>
<body>

<h1>InfoVis UE 2023 - Exercise 2</h1>
<p>Stefan Weingaertner xxxxxxxx & Joerg Wegscheider 00212105</p>


<div id="main_container" class="main_container">
<div class="container">
    <label>Indicator:</label>
<select id="indicator_dropdown" class="dropdown">
    {% for col in variables %}
        <option value="{{ col }}">{{ col }}</option>
    {% endfor %}
</select>
    <p id="map_country">&nbsp;</p>
    <svg id="svg_map"></svg>
</div>
<div class="container">
    <p id="country">&nbsp;</p>
    <svg id="svg_plot"></svg>
</div>
</div>

<div id="svg_line_chart">
</div>

<script>
    let data = {{ data | safe }};
    console.log(data);


    var width = 900,
        height = 600;

    var svg = d3.select( "body" )
          .append( "svg" )
          .attr( "width", width )
          .attr( "height", height );

    var projection = d3.geoEquirectangular()
        .scale(170)
        .translate([width / 2, height / 2]);

    var geoPath = d3.geoPath()
        .projection(projection);

    d3.queue()
        .defer(d3.json, "world-topo.json")
        .await(ready);

    function ready(error, countries){

         svg.append("g")
            .selectAll("path")
            .data( topojson.feature(countries, countries.objects.countries).features)
            .enter()
            .append("path")
            .attr( "d", geoPath )
            .attr("class","country");

    }

</script>

<script src="{{ url_for('static', filename='js/map.js') }}"></script>
<script>initMap()</script>

</body>
</html>